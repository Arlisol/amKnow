webpackJsonp([7],{GFhF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("YtJ0"),n=a("mtWM"),i=a.n(n),l={name:"StockMng",store:o.a,data:function(){var t=this;return{loading:!1,tabValue:"car",filterAutomobileStock:[],formVisible:!1,formData:{},changeObject:"",stockNumber:0,automobileCategorys:[{label:"轿车",value:"car"},{label:"SUV",value:"suv"},{label:"MPV",value:"mpv"},{label:"跑车",value:"sportscar"},{label:"皮卡",value:"pickup"},{label:"微面",value:"minivan"},{label:"微卡",value:"minitruck"},{label:"轻客",value:"lightbus"}],automobileStock:[],formRules:{number:[{required:!0,message:"请输入变更数量",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"请输入正整数",trigger:"blur"},{validator:function(e,a,o){if(!t.formData.operation&&a>t.stockNumber)return o(new Error("减少量不能多于库存量"));o()},trigger:"blur"}]}}},mounted:function(){this.loading=!0;var t=this;i.a.get("https://www.easy-mock.com/mock/5c702a27d3044d1448586d67/amKnow/stock").then(function(e){t.automobileStock=e.data,t.filterStock(),t.loading=!1}).catch(function(e){t.$message({message:"网络错误,请稍后再试",type:"error"}),t.loading=!1})},computed:{getShow:function(){return this.$store.state.isShow}},methods:{handleClick:function(t){this.tabValue=t.name,this.filterStock()},filterStock:function(){var t=this.tabValue,e=this.automobileStock.filter(function(e){return e.category==t});this.filterAutomobileStock=e},handleChange:function(t,e){this.formVisible=!0,this.formData=0==e?{operation:!0,number:null}:{operation:!1,number:null},this.changeObject=t,this.stockNumber=e},changeSubmit:function(){var t=this;this.$refs.formData.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{cancelButtonClass:"btn-custom-cancel"}).then(function(){var e=0;e=t.formData.operation?t.stockNumber+t.formData.number:t.stockNumber-t.formData.number;var a=t.automobileStock;for(var o in a)if(a[o].name==t.changeObject){a[o].inventory=e;break}t.filterStock(),t.$message({message:"变更成功",type:"success"}),t.$refs.formData.resetFields(),t.changeObject="",t.stockNumber=0,t.formVisible=!1}).catch(function(){})})},closeDialog:function(){this.changeObject="",this.stockNumber=0,this.$refs.formData.resetFields()},handleClose:function(){this.changeObject="",this.stockNumber=0,this.formVisible=!1,this.$refs.formData.resetFields()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-tabs"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"border-card",stretch:""},on:{"tab-click":t.handleClick},model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[t._l(t.automobileCategorys,function(e){return[a("el-tab-pane",{key:e.value,class:0==t.filterAutomobileStock.length?"tab-small":"tab-normal",attrs:{label:e.label,name:e.value}},[t._l(t.filterAutomobileStock,function(e,o){return a("el-col",{key:e.name,class:o>=4&&t.getShow<3||o>=3&&t.getShow>=3?"col-padding-rest":"col-padding-first",attrs:{span:t.getShow<3?4:7,offset:o>0&&o%4!=0&&t.getShow<3?2:1}},[a("el-card",{attrs:{"body-style":{padding:"0px",width:"100%"},shadow:"hover"}},[e.image?a("img",{attrs:{src:e.image,alt:e.name,width:"100%"}}):t._e(),t._v(" "),a("div",{staticClass:"card-content"},[a("span",{class:t.getShow<=2?"name-small":"name-mini"},[a("strong",[t._v(t._s(e.name))])]),t._v(" "),a("br"),t._v(" "),a("span",{class:t.getShow<=2?"stock-small":"stock-mini"},[t._v("\n                库存量:\n                "),a("strong",[t._v(t._s(e.inventory))]),t._v("辆\n              ")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"button-padding-top"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.getShow,expression:"getShow == 1"}],attrs:{type:"warning",icon:"el-icon-edit-outline",size:"small",round:"",plain:""},on:{click:function(a){return t.handleChange(e.name,e.inventory)}}},[t._v("库存变更")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=t.getShow,expression:"getShow != 1"}],attrs:{type:"warning",icon:"el-icon-edit-outline",size:t.getShow>=3?"mini":"small",title:"库存变更",circle:"",plain:""},on:{click:function(a){return t.handleChange(e.name,e.inventory)}}})],1)])])],1)}),t._v(" "),0==t.filterAutomobileStock.length?a("div",{staticStyle:{color:"#909399"}},[a("span",[t._v("暂无数据")])]):t._e()],2)]})],2),t._v(" "),a("el-dialog",{attrs:{title:"库存变更",visible:t.formVisible,"close-on-click-modal":!1,"custom-class":"brand-dialog-min-width",top:"28vh",width:"32%"},on:{"update:visible":function(e){t.formVisible=e},close:t.closeDialog}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{staticClass:"row-padding-bottom",attrs:{label:"操作"}},[a("el-switch",{attrs:{"active-color":"#98FB98","inactive-color":"#FA8072","active-text":"增加","inactive-text":"减少",disabled:0==t.stockNumber},model:{value:t.formData.operation,callback:function(e){t.$set(t.formData,"operation",e)},expression:"formData.operation"}})],1),t._v(" "),a("el-form-item",{staticClass:"row-padding-bottom",attrs:{label:"变更数量",prop:"number"}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:t.formData.number,callback:function(e){t.$set(t.formData,"number",t._n(e))},expression:"formData.number"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.changeSubmit(e)}}},[t._v("提交")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,r,!1,function(t){a("Rsrd")},null,null);e.default=s.exports},Rsrd:function(t,e){}});
//# sourceMappingURL=7.08b7bd6ac8a50054c924.js.map